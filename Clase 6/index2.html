<!-- Se muestra el comportamiento del sticky-->
 

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>P√°gina Sticky Extendida ‚Äî Header din√°mico</title>
    <link rel="stylesheet" href="./CSS/styles2.css" />
    <!-- Estilos adicionales necesarios para la animaci√≥n/compresi√≥n del header.
         Puedes moverlos luego a styles2.css si quer√©s mantener todo en un archivo. -->
    <style>
      /* Transiciones y cambios visuales al hacer scroll */
      .sticky-header {
        transition: transform 220ms ease, padding 220ms ease, box-shadow 220ms ease;
        will-change: transform, padding;
      }

      /* Estado al scrollear (header m√°s peque√±o) */
      .sticky-header.scrolled {
        padding: 8px 20px;           /* menos alto */
        box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      }

      /* Reducir tama√±o del h1 cuando est√° scrolled */
      .sticky-header.scrolled h1 {
        font-size: 1rem;
      }

      /* Clase que oculta el header (scroll hacia abajo) */
      .sticky-header.hide {
        transform: translateY(-120%); /* lo saca hacia arriba */
      }

      /* Compatibilidad con usuarios que prefieren reducir movimiento */
      @media (prefers-reduced-motion: reduce) {
        .sticky-header,
        .sticky-header.scrolled,
        .sticky-header.hide {
          transition: none !important;
        }
      }
    </style>
</head>

<body>

    <header class="sticky-header">
        <h1>Este es el header sticky üîù</h1>
    </header>

    <main>
        <!-- Secci√≥n 1 -->
        <section>
            <h2>Secci√≥n 1</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin euismod lorem ut orci tincidunt,
                ut ultrices erat luctus. Cras vel nulla ac mi cursus imperdiet. Integer sit amet fringilla nisi.
                Aenean gravida, justo a feugiat maximus, ex sapien ullamcorper risus, sed volutpat mi magna at arcu.
                Phasellus sit amet dictum mi. Donec faucibus, nibh ut fermentum vehicula, mi sapien tincidunt leo,
                ac facilisis sapien turpis sed mi.
            </p>
        </section>

        <!-- Secci√≥n 2 -->
        <section>
            <h2>Secci√≥n 2</h2>
            <p>
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis quis metus ac justo facilisis cursus.
                Suspendisse feugiat quam in nisl blandit, sed sagittis justo viverra. Nullam dictum magna in massa
                facilisis, vitae finibus odio imperdiet. Donec at leo quis velit feugiat luctus non sed nunc.
                Curabitur eget odio justo. Sed vitae orci vitae lacus varius gravida.
            </p>
        </section>

        <!-- Secci√≥n 3 -->
        <section>
            <h2>Secci√≥n 3</h2>
            <p>
                Scroll, scroll y m√°s scroll... Pellentesque habitant morbi tristique senectus et netus et malesuada
                fames ac turpis egestas. Ut blandit fringilla nunc in tempor. Donec dignissim, justo ut vulputate
                feugiat, risus lectus ultrices est, ac cursus ipsum eros sit amet lorem. Sed interdum, nisl vel
                elementum faucibus, mi felis vulputate lorem, et lacinia neque sapien non ipsum.
            </p>
        </section>

        <!-- Secci√≥n 4 -->
        <section>
            <h2>Secci√≥n 4</h2>
            <p>
                Mucha m√°s info ac√° para que puedas ver c√≥mo se queda pegado el header. Seguimos agregando contenido
                ficticio... Lorem ipsum dolor sit amet, consectetur adipiscing elit. In et velit vitae justo facilisis
                pretium vel et sem. Sed ut dapibus mi. Quisque volutpat, velit eget maximus sagittis, elit risus lacinia
                tortor, at fringilla magna elit nec ligula.
            </p>
        </section>

        <!-- Secci√≥n 5 -->
        <section>
            <h2>Secci√≥n 5</h2>
            <p>
                Seguimos bajando... Nam in massa vitae eros porttitor aliquam. Vestibulum ante ipsum primis in faucibus
                orci luctus et ultrices posuere cubilia curae; Fusce ut purus sit amet arcu sagittis tempor vel a
                mauris.
                Proin fermentum ante sed lectus convallis, vitae viverra urna ultricies. Donec fringilla nisi at nisl
                suscipit, sed cursus justo cursus.
            </p>
        </section>

        <!-- Secci√≥n 6 -->
        <section>
            <h2>Secci√≥n 6</h2>
            <p>
                Phasellus eu imperdiet erat. Nulla facilisi. Suspendisse nec ante sed lorem posuere convallis.
                Pellentesque finibus egestas risus, ac interdum nisl dignissim id. Curabitur ac sodales tortor.
                Maecenas eget tincidunt nisi, in vehicula ligula. Suspendisse potenti.
            </p>
        </section>

        <!-- Secci√≥n 7 -->
        <section>
            <h2>Secci√≥n 7</h2>
            <p>
                Cras vulputate blandit nulla at tincidunt. Sed nec fringilla neque. Integer vel erat at tortor
                fringilla accumsan. Etiam tristique tellus justo, a vestibulum erat condimentum in. Vestibulum ante
                ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Aenean convallis lorem a sapien
                tincidunt porttitor.
            </p>
        </section>

        <!-- Secci√≥n 8 -->
        <section>
            <h2>Secci√≥n 8</h2>
            <p>
                Ya casi llegamos al final. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam at justo non
                magna feugiat vulputate in id lacus. Curabitur nec felis eget lacus euismod venenatis. Morbi rutrum
                lectus non mattis elementum. Donec luctus convallis turpis, et dapibus urna.
            </p>
        </section>

        <!-- Secci√≥n 9 -->
        <section>
            <h2>Secci√≥n 9</h2>
            <p>
                √öltimo tramo... el header sigue firme üîù gracias a <code>position: sticky</code> y <code>top: 0</code>.
                Nulla facilisi. Donec nec lacus vel purus iaculis fermentum. Vestibulum ante ipsum primis in faucibus
                orci luctus et ultrices posuere cubilia curae.
            </p>
        </section>

        <!-- Secci√≥n 10 -->
        <section>
            <h2>Secci√≥n 10</h2>
            <p>
                √öltimo tramo... el header sigue firme üîù gracias a <code>position: sticky</code> y <code>top: 0</code>.
                Nulla facilisi. Donec nec lacus vel purus iaculis fermentum. Vestibulum ante ipsum primis in faucibus
                orci luctus et ultrices posuere cubilia curae.
            </p>
        </section>

        <!-- Secci√≥n 11 -->
        <section>
            <h2>Secci√≥n 11</h2>
            <p>
                Fin del scroll largo üòé. Si todav√≠a ves el header arriba, ¬°funciona perfecto! Lorem ipsum dolor sit
                amet, consectetur adipiscing elit. Sed tincidunt dignissim magna, sit amet vehicula libre accumsan ut.
            </p>
        </section>
    </main>

    <!-- Script que aplica las clases .scrolled (header m√°s peque√±o) y .hide (ocultar al bajar) -->
    <script>
      (function () {
        const header = document.querySelector('.sticky-header');
        if (!header) return;

        let lastScroll = window.scrollY || 0;
        const downThreshold = 10;    // px para empezar a ocultar cuando se vaya hacia abajo
        const upThreshold = 5;       // px para mostrar cuando se vaya hacia arriba
        const minForScrolled = 40;   // px desde top para activar 'scrolled' (achicar)

        let ticking = false;

        function onScroll() {
          const current = window.scrollY || 0;

          // Activar clase 'scrolled' cuando estamos un poco debajo del tope
          if (current > minForScrolled) {
            header.classList.add('scrolled');
          } else {
            header.classList.remove('scrolled');
          }

          // Determinar direcci√≥n: si vamos hacia abajo y pasamos threshold -> ocultar
          if (current - lastScroll > downThreshold && current > minForScrolled) {
            header.classList.add('hide');
          } else if (lastScroll - current > upThreshold) {
            // si subimos -> mostrar
            header.classList.remove('hide');
          }

          lastScroll = current <= 0 ? 0 : current;
          ticking = false;
        }

        // Optimizaci√≥n con rAF
        window.addEventListener('scroll', function () {
          if (!ticking) {
            window.requestAnimationFrame(onScroll);
            ticking = true;
          }
        }, { passive: true });

        // Mostrar header al enfocar la ventana (√∫til si vuelven desde otra pesta√±a)
        window.addEventListener('focus', () => header.classList.remove('hide'));
      })();
    </script>
</body>

</html>
